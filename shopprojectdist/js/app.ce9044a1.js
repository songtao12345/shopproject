(function(e){function t(t){for(var s,i,l=t[0],n=t[1],c=t[2],d=0,m=[];d<l.length;d++)i=l[d],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&m.push(o[i][0]),o[i]=0;for(s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s]);u&&u(t);while(m.length)m.shift()();return r.push.apply(r,c||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],s=!0,l=1;l<a.length;l++){var n=a[l];0!==o[n]&&(s=!1)}s&&(r.splice(t--,1),e=i(i.s=a[0]))}return e}var s={},o={app:0},r=[];function i(t){if(s[t])return s[t].exports;var a=s[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=s,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(a,s,function(t){return e[t]}.bind(null,s));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],n=l.push.bind(l);l.push=t,l=l.slice();for(var c=0;c<l.length;c++)t(l[c]);var u=n;r.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"0e05":function(e,t,a){},"0ee6":function(e,t,a){},"150b":function(e,t,a){},"162e":function(e,t,a){e.exports=a.p+"img/doge.b5fbf6c1.jpg"},"2ba9":function(e,t,a){"use strict";a("0ee6")},"352c":function(e,t,a){"use strict";a("57f9")},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var s=a("2b0e"),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},r=[],i={name:"App"},l=i,n=a("2877"),c=Object(n["a"])(l,o,r,!1,null,"e5dbc93e",null),u=c.exports,d=a("8c4f"),m=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login"},[a("div",{staticClass:"login_box"},[e._m(0),a("el-form",{ref:"form",staticClass:"login_form",attrs:{model:e.form,rules:e.formRules}},[a("el-form-item",{attrs:{prop:"username"}},[a("el-input",{attrs:{"prefix-icon":"el-icon-user",placeholder:"请输入用户名"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),a("el-form-item",{attrs:{prop:"password"}},[a("el-input",{attrs:{"prefix-icon":"el-icon-lock",type:"password",placeholder:"请输入密码"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),a("div",{staticClass:"button"},[a("el-button",{attrs:{type:"primary"},on:{click:e.login}},[e._v("登陆")]),a("el-button",{attrs:{type:"info"},on:{click:e.buttonClick}},[e._v("重置")])],1)],1)],1)])},f=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"dog"},[s("img",{attrs:{src:a("162e"),alt:""}})])}],g=a("bc3a"),p=a.n(g);function h(e){var t=p.a.create({baseURL:"http://127.0.0.1:8888/api/private/v1",timeout:5e3});return t.interceptors.request.use((function(e){return e.headers.Authorization=window.sessionStorage.getItem("token"),e}),(function(e){})),t.interceptors.response.use((function(e){return e.data}),(function(e){console.log(e)})),t(e)}function b(e,t){return h({method:"post",url:"/login",params:{username:e,password:t}})}var v={name:"Login",data:function(){return{form:{username:"admin",password:"123456"},formRules:{username:[{required:!0,message:"用户名不能为空",trigger:"blur"},{min:3,max:10,message:"长度在 3 到 10 个字符",trigger:"blur"}],password:[{required:!0,message:"密码不能为空",trigger:"blur"},{min:3,max:10,message:"长度在 3 到 10 个字符",trigger:"blur"}]}}},methods:{buttonClick:function(){this.$refs.form.resetFields()},login:function(){var e=this;this.$refs.form.validate((function(t){t&&b(e.form.username,e.form.password).then((function(t){if(200!==t.meta.status)return e.$message.error("用户名或密码错误");e.$message.success("登陆成功"),console.log(t),window.sessionStorage.setItem("token",t.data.token),e.$router.push("/home")}))}))}}},_=v,y=(a("352c"),Object(n["a"])(_,m,f,!1,null,"161241b0",null)),C=y.exports,w=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-container",{staticClass:"container"},[s("el-header",[s("div",{staticClass:"left"},[s("img",{attrs:{src:a("162e"),alt:""}}),s("span",[e._v("电商管理系统")])]),s("div",{staticClass:"right"},[s("el-button",{attrs:{type:"info"},on:{click:e.logout}},[e._v("退出")])],1)]),s("el-container",[s("el-aside",{attrs:{width:e.isCollapse?"64px":"200px"}},[s("div",{staticClass:"collapse",on:{click:e.collapse}},[e._v("|||")]),s("el-menu",{attrs:{router:"","background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b","unique-opened":"",collapse:e.isCollapse,"collapse-transition":!1}},e._l(e.menusList,(function(t,a){return s("el-submenu",{key:a,attrs:{index:t.id+""}},[s("template",{slot:"title"},[s("i",{class:e.iconObj[t.id]}),s("span",[e._v(e._s(t.authName))])]),e._l(t.children,(function(t,a){return s("el-menu-item",{key:a,attrs:{index:t.path+""}},[s("template",{slot:"title"},[s("i",{staticClass:"el-icon-menu"}),s("span",[e._v(e._s(t.authName))])])],2)}))],2)})),1)],1),s("el-main",[s("router-view")],1)],1)],1)},R=[],k=a("ade3");function $(){return h({method:"get",url:"/menus"})}var x=Object(k["a"])({name:"Home",data:function(){return{menusList:[],iconObj:{125:"el-icon-user",103:"el-icon-location",101:"el-icon-s-goods",102:"el-icon-s-order",145:"el-icon-s-data"},isCollapse:!1}},created:function(){var e=this;$().then((function(t){e.menusList=t.data}))},methods:{}},"methods",{logout:function(){this.$router.push("/login")},collapse:function(){this.isCollapse=!this.isCollapse}}),D=x,F=(a("a3fa"),Object(n["a"])(D,w,R,!1,null,"731ba8c8",null)),V=F.exports,I=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"welcome"},[e._v(" welcome ")])},z=[],O={name:"Welcome"},L=O,j=Object(n["a"])(L,I,z,!1,null,"0f1af439",null),S=j.exports,q=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"user"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[e._v("首页")]),a("el-breadcrumb-item",[a("a",{attrs:{href:"/users"}},[e._v("用户管理")])]),a("el-breadcrumb-item",[e._v("用户列表")])],1),a("el-card",{staticClass:"box-card",attrs:{shadow:"hover"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入内容",clearable:""},on:{clear:e.getUser},model:{value:e.query,callback:function(t){e.query=t},expression:"query"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.getUser},slot:"append"})],1)],1),a("el-col",{attrs:{span:4}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("添加用户")])],1)],1),e._v("、 "),a("el-table",{attrs:{data:e.userList,border:"",stripe:""}},[a("el-table-column",{attrs:{label:"#",type:"index"}}),a("el-table-column",{attrs:{label:"姓名",prop:"username"}}),a("el-table-column",{attrs:{label:"邮箱",prop:"email"}}),a("el-table-column",{attrs:{label:"电话",prop:"mobile"}}),a("el-table-column",{attrs:{label:"角色",prop:"role_name"}}),a("el-table-column",{attrs:{label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(a){return e.statusChange(t.row)}},model:{value:t.row.mg_state,callback:function(a){e.$set(t.row,"mg_state",a)},expression:"scope.row.mg_state"}})]}}])}),a("el-table-column",{attrs:{label:"操作",width:"180px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(a){return e.editDialog(t.row.id)}}}),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(a){return e.deleteDialog(t.row.id)}}}),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"分配权限",placement:"top",enterable:!1}},[a("el-button",{attrs:{type:"warning",icon:"el-icon-setting",size:"mini"},on:{click:function(a){return e.assignRole(t.row)}}})],1)]}}])})],1),a("el-pagination",{attrs:{"current-page":e.pagenum,"page-sizes":[1,2,5,10],"page-size":e.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),a("el-dialog",{attrs:{title:"添加用户",visible:e.dialogVisible,width:"50%"},on:{"update:visible":function(t){e.dialogVisible=t},close:e.addFormClose}},[a("el-form",{ref:"addForm",attrs:{model:e.addForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"用户名",prop:"username"}},[a("el-input",{model:{value:e.addForm.username,callback:function(t){e.$set(e.addForm,"username",t)},expression:"addForm.username"}})],1),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{model:{value:e.addForm.password,callback:function(t){e.$set(e.addForm,"password",t)},expression:"addForm.password"}})],1),a("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[a("el-input",{model:{value:e.addForm.email,callback:function(t){e.$set(e.addForm,"email",t)},expression:"addForm.email"}})],1),a("el-form-item",{attrs:{label:"手机",prop:"mobile"}},[a("el-input",{model:{value:e.addForm.mobile,callback:function(t){e.$set(e.addForm,"mobile",t)},expression:"addForm.mobile"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.addUser}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"修改用户信息",visible:e.editDialogVisible,width:"50%"},on:{"update:visible":function(t){e.editDialogVisible=t},close:e.editDialogClose}},[a("el-form",{ref:"addFormRef",attrs:{model:e.editForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"用户名",prop:"username"}},[a("el-input",{attrs:{disabled:""},model:{value:e.editForm.username,callback:function(t){e.$set(e.editForm,"username",t)},expression:"editForm.username"}})],1),a("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[a("el-input",{model:{value:e.editForm.email,callback:function(t){e.$set(e.editForm,"email",t)},expression:"editForm.email"}})],1),a("el-form-item",{attrs:{label:"手机",prop:"mobile"}},[a("el-input",{model:{value:e.editForm.mobile,callback:function(t){e.$set(e.editForm,"mobile",t)},expression:"editForm.mobile"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.editDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.editUserInfo}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"分配角色",visible:e.roleDialogVisible,width:"30%"},on:{"update:visible":function(t){e.roleDialogVisible=t},close:e.roleClose}},[a("div",[a("p",[e._v("当前的用户: "+e._s(e.userInfo.username))]),a("p",[e._v("当前的角色: "+e._s(e.userInfo.role_name))]),a("p",[e._v("分配新角色: "),a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.selectedRoleId,callback:function(t){e.selectedRoleId=t},expression:"selectedRoleId"}},e._l(e.rolesList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.roleName,value:e.id}})})),1)],1)]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.roleDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.savaRoleInfo}},[e._v("确 定")])],1)])],1)},N=[];a("99af");function E(e,t,a){return h({url:"/users",params:{query:e,pagenum:t,pagesize:a}})}function P(e,t){return h({method:"put",url:"/users/".concat(e,"/state/").concat(t),params:{uId:e,type:t}})}function T(e,t,a,s){return h({method:"post",url:"/users",data:{username:e,password:t,email:a,mobile:s}})}function U(e){return h({url:"/users/"+e,params:{id:e}})}function B(e,t,a){return h({method:"put",url:"/users/".concat(e),data:{id:e,email:t,mobile:a}})}function H(e){return h({method:"delete",url:"/users/".concat(e),params:{id:e}})}function M(){return h({method:"get",url:"/rights/list"})}function K(){return h({method:"get",url:"/roles"})}function A(e,t){return h({method:"post",url:"/roles",data:{roleName:e,roleDesc:t}})}function G(e){return h({method:"get",url:"roles/".concat(e),params:{id:e}})}function J(e,t,a){return h({method:"put",url:"roles/".concat(e),data:{id:e,roleName:t,roleDesc:a}})}function W(e){return h({method:"delete",url:"roles/".concat(e),params:{id:e}})}function Q(e,t){return h({method:"delete",url:"/roles/".concat(e,"/rights/").concat(t),params:{roleId:e,rightId:t}})}function X(){return h({method:"get",url:"rights/tree"})}function Y(e,t){return h({method:"post",url:"roles/".concat(e,"/rights"),data:{roleId:e,rids:t}})}function Z(e,t){return h({method:"put",url:"users/".concat(e,"/role"),data:{id:e,rid:t}})}var ee={name:"Users",methods:{roleClose:function(){this.selectedRoleId="",this.userInfo={}},savaRoleInfo:function(){var e=this;Z(this.userInfo.id,this.selectedRoleId).then((function(t){if(200!==t.meta.status)return e.$message.error("分配角色失败");e.$message.success("分配角色成功"),e.getUser()})),this.roleDialogVisible=!1},assignRole:function(e){var t=this;this.userInfo=e,console.log(this.userInfo),K().then((function(e){if(console.log(e),200!==e.meta.status)return t.$message.error("获取权限列表失败");t.rolesList=e.data})),this.roleDialogVisible=!0},deleteDialog:function(e){var t=this;this.$confirm("此操作将永久删除该用户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){console.log(e),H(e).then((function(e){console.log(e),200===e.meta.status&&(t.getUser(),t.$message({type:"success",message:"删除成功"}))}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},editUserInfo:function(){var e=this;this.$refs.addFormRef.validate((function(t){console.log(t),t&&B(e.editForm.id,e.editForm.email,e.editForm.mobile).then((function(t){if(console.log(t),200!==t.meta.status)return e.$message.error("更新用户信息失败");e.editDialogVisible=!1,e.getUser(),e.$message.success("更新用户信息成功")}))}))},editDialogClose:function(){this.$refs.addFormRef.resetFields()},editDialog:function(e){var t=this;U(e).then((function(e){console.log(e),t.editForm=e.data})),this.editDialogVisible=!0},addUser:function(){var e=this;this.$refs.addForm.validate((function(t){console.log(t),t&&T(e.addForm.username,e.addForm.password,e.addForm.email,e.addForm.mobile).then((function(t){if(console.log(t),201!==t.meta.status)return e.$message.error("添加用户失败");e.$message.success("添加用户成功"),e.dialogVisible=!1}))}))},addFormClose:function(){this.$refs.addForm.resetFields()},handleSizeChange:function(e){this.pagesize=e,this.getUser()},handleCurrentChange:function(e){this.pagenum=e,this.getUser()},getUser:function(){var e=this;E(this.query,this.pagenum,this.pagesize).then((function(t){if(200!==t.meta.status)return e.$message.error("获取用户列表失败");e.userList=t.data.users,e.total=t.data.total}))},statusChange:function(e){var t=this;console.log(e.id,e.mg_state),P(e.id,e.mg_state).then((function(a){console.log(a),200!==a.meta.status&&(e.mg_state=!e.mg_state,t.$message.error("更新用户列表失败")),t.$message.success("更新用户列表成功")}))}},data:function(){return{query:"",pagenum:1,pagesize:5,userList:[],rolesList:[],editForm:{},total:0,dialogVisible:!1,editDialogVisible:!1,roleDialogVisible:!1,userInfo:{},selectedRoleId:"",addForm:{username:"",password:"",email:"",mobile:""},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:10,message:"长度在 3 到 10 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:3,max:10,message:"长度在 3 到 10 个字符",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:"blur"}],mobile:[{required:!0,message:"请输入手机",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:"手机号格式不对",trigger:"blur"}]}}},created:function(){this.getUser()}},te=ee,ae=Object(n["a"])(te,q,N,!1,null,"46a5c942",null),se=ae.exports,oe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"roles"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),a("el-breadcrumb-item",[e._v("权限管理")]),a("el-breadcrumb-item",[e._v("角色列表")])],1),a("el-card",{staticClass:"box-card"},[a("el-button",{attrs:{type:"primary"},on:{click:e.addRole}},[e._v("添加角色")]),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.rolesList,stripe:"",border:""}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.children,(function(s){return a("el-row",{key:s.id},[a("el-col",{attrs:{span:5}},[a("el-tag",{attrs:{closable:""},on:{close:function(a){return e.removeRights(t.row,s.id)}}},[e._v(e._s(s.authName))]),a("i",{staticClass:"el-icon-caret-right"})],1),a("el-col",{attrs:{span:19}},e._l(s.children,(function(s){return a("el-row",{key:s.id},[a("el-col",{attrs:{span:6}},[a("el-tag",{attrs:{type:"success",closable:""},on:{close:function(a){return e.removeRights(t.row,s.id)}}},[e._v(e._s(s.authName))]),a("i",{staticClass:"el-icon-caret-right"})],1),a("el-col",{attrs:{span:13}},e._l(s.children,(function(s){return a("el-tag",{key:s.id,attrs:{type:"warning",closable:""},on:{close:function(a){return e.removeRights(t.row,s.id)}}},[e._v(e._s(s.authName))])})),1)],1)})),1)],1)}))}}])}),a("el-table-column",{attrs:{label:"#",type:"index"}}),a("el-table-column",{attrs:{prop:"roleName",label:"角色名称"}}),a("el-table-column",{attrs:{prop:"roleDesc",label:"角色描述"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(a){return e.rolesEditDialog(t.row.id)}}},[e._v("编辑")]),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(a){return e.rolesDeleteDialog(t.row.id)}}},[e._v("删除")]),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"分配权限",placement:"top",enterable:!1}},[a("el-button",{attrs:{type:"warning",icon:"el-icon-setting",size:"mini"},on:{click:function(a){return e.assignRights(t.row)}}},[e._v("分配权限")])],1)]}}])})],1)],1),a("el-dialog",{attrs:{title:"添加角色",visible:e.rolesDialogVisible,width:"50%"},on:{"update:visible":function(t){e.rolesDialogVisible=t}}},[a("el-form",{ref:"addRoles",attrs:{model:e.addRoles,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"角色名称",prop:"roleName"}},[a("el-input",{model:{value:e.addRoles.roleName,callback:function(t){e.$set(e.addRoles,"roleName",t)},expression:"addRoles.roleName"}})],1),a("el-form-item",{attrs:{label:"角色描述",prop:"roleDesc"}},[a("el-input",{model:{value:e.addRoles.roleDesc,callback:function(t){e.$set(e.addRoles,"roleDesc",t)},expression:"addRoles.roleDesc"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.rolesDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.addRolesInfo}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"修改角色信息",visible:e.editRolesDialogVisible,width:"50%"},on:{"update:visible":function(t){e.editRolesDialogVisible=t}}},[a("el-form",{ref:"addRolesRef",attrs:{model:e.editRoles,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"角色名称",prop:"roleName"}},[a("el-input",{attrs:{disabled:""},model:{value:e.editRoles.roleName,callback:function(t){e.$set(e.editRoles,"roleName",t)},expression:"editRoles.roleName"}})],1),a("el-form-item",{attrs:{label:"角色描述",prop:"roleDesc"}},[a("el-input",{model:{value:e.editRoles.roleDesc,callback:function(t){e.$set(e.editRoles,"roleDesc",t)},expression:"editRoles.roleDesc"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.editRolesDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.editRolesInfo}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"分配权限",visible:e.showRightsdialogVisible,width:"50%"},on:{"update:visible":function(t){e.showRightsdialogVisible=t},close:e.assignRightsClose}},[a("el-tree",{ref:"assignRef",attrs:{data:e.rightsList,props:e.rightsProps,"show-checkbox":"","node-key":"id","default-expand-all":"","default-checked-keys":e.checkedKeys}}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.showRightsdialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.assignRightsDialog}},[e._v("确 定")])],1)],1)],1)},re=[],ie=a("2909"),le=(a("159b"),a("a15b"),{name:"Roles",data:function(){return{rolesList:[],roleId:"",rolesDialogVisible:!1,editRolesDialogVisible:!1,showRightsdialogVisible:!1,editRoles:{},rightsList:[],checkedKeys:[],rightsProps:{children:"children",label:"authName"},addRoles:{roleName:"",roleDesc:""},rules:{roleName:[{required:!1,message:"请输入角色名",trigger:"blur"},{min:3,max:10,message:"长度在 3 到 10 个字符",trigger:"blur"}],roleDesc:[{required:!1,message:"请输入角色名",trigger:"blur"}]}}},methods:{addRole:function(){this.rolesDialogVisible=!0,this.$refs.addRoles.resetFields()},getRoles:function(){var e=this;K().then((function(t){if(200!==t.meta.status)return e.$message.error("获取角色列表失败");e.rolesList=t.data}))},addRolesInfo:function(){var e=this;this.$refs.addRoles.validate((function(t){t&&A(e.addRoles.roleName,e.addRoles.roleDesc).then((function(t){if(201!==t.meta.status)return e.$message.error("添加角色信息失败");e.$message.success("添加角色信息成功"),e.rolesDialogVisible=!1,e.getRoles()}))}))},rolesEditDialog:function(e){var t=this;G(e).then((function(a){console.log(a.data.roleName),t.editRoles=a.data,t.editRoles.id=e})),this.editRolesDialogVisible=!0},editRolesInfo:function(){var e=this;J(this.editRoles.id,this.editRoles.roleName,this.editRoles.roleDesc).then((function(t){if(200!==t.meta.status)return e.$message.error("编辑用户信息失败");e.$message.success("编辑用户信息成功"),e.editRolesDialogVisible=!1,e.getRoles()}))},rolesDeleteDialog:function(e){var t=this;this.$confirm("此操作将永久删除该角色, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){console.log(e),W(e).then((function(e){if(console.log(e),200!==e.meta.status)return t.$message.error("删除用户信息失败");t.$message.success("删除用户信息成功"),t.getRoles()}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},removeRights:function(e,t){var a=this;this.$confirm("此操作将永久删除该用户权限, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Q(e.id,t).then((function(t){if(200!==t.meta.status)return a.$message.error("删除用户权限失败");a.$message.success("删除用户权限成功"),e.children=t.data}))})).catch((function(){a.$message({type:"info",message:"已取消删除"})}))},getThreeRightsId:function(e,t){var a=this;if(!e.children)return t.push(e.id);e.children.forEach((function(e){return[a.getThreeRightsId(e,t)]}))},assignRights:function(e){var t=this;this.roleId=e.id,this.getThreeRightsId(e,this.checkedKeys),this.showRightsdialogVisible=!0,X().then((function(e){if(200!==e.meta.status)return t.$message.error("获取权限列表失败");t.rightsList=e.data}))},assignRightsClose:function(){this.checkedKeys=[]},assignRightsDialog:function(){var e=this,t=[].concat(Object(ie["a"])(this.$refs.assignRef.getCheckedKeys()),Object(ie["a"])(this.$refs.assignRef.getHalfCheckedKeys())),a=t.join(",");console.log(a),console.log(this.roleId),Y(this.roleId,a).then((function(t){if(console.log(t),200!==t.meta.status)return e.$message.error("更新权限列表失败");e.$message.success("更新权限列表成功"),e.showRightsdialogVisible=!1,e.getRoles()}))}},created:function(){this.getRoles()}}),ne=le,ce=(a("2ba9"),Object(n["a"])(ne,oe,re,!1,null,"f99b6554",null)),ue=ce.exports,de=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"right"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),a("el-breadcrumb-item",[e._v("权限管理")]),a("el-breadcrumb-item",[e._v("权限列表")])],1),a("el-card",{staticClass:"box-card"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.rightsList,stripe:"",border:""}},[a("el-table-column",{attrs:{label:"#",type:"index"}}),a("el-table-column",{attrs:{prop:"authName",label:"权限名称",width:"180"}}),a("el-table-column",{attrs:{prop:"path",label:"路径",width:"180"}}),a("el-table-column",{attrs:{prop:"level",label:"权限等级"},scopedSlots:e._u([{key:"default",fn:function(t){return["0"===t.row.level?a("el-tag",[e._v("一级")]):"1"===t.row.level?a("el-tag",{attrs:{type:"success"}},[e._v("二级")]):a("el-tag",{attrs:{type:"warning"}},[e._v("三级")])]}}])})],1)],1)],1)},me=[],fe={name:"Rights",data:function(){return{rightsList:[],pagenum:1,pagesize:5,total:0}},methods:{getRightsListInfo:function(){var e=this;M(this.pagenum,this.pagesize).then((function(t){if(console.log(t),200!==t.meta.status)return e.$message.error("获取权限列表失败");e.rightsList=t.data,e.total=t.data.length}))},handleSizeChange:function(e){console.log(e),this.pagesize=e,this.getRightsListInfo()},handleCurrentChange:function(e){console.log(e),this.pagenum=e,this.getRightsListInfo()}},created:function(){this.getRightsListInfo()}},ge=fe,pe=Object(n["a"])(ge,de,me,!1,null,"7f60983d",null),he=pe.exports,be=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"Goods"},[e._v(" Goods ")])},ve=[],_e={name:"Goods"},ye=_e,Ce=Object(n["a"])(ye,be,ve,!1,null,"16d329ba",null),we=Ce.exports,Re=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"Params"},[e._v(" Params ")])},ke=[],$e={name:"Params"},xe=$e,De=Object(n["a"])(xe,Re,ke,!1,null,"659cbfaa",null),Fe=De.exports,Ve=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"Categories"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),a("el-breadcrumb-item",[e._v("商品管理")]),a("el-breadcrumb-item",[e._v("商品分类")])],1),a("el-card",{staticClass:"box-card"},[a("el-button",{attrs:{type:"primary"},on:{click:e.addCate}},[e._v("添加分类")]),a("table-tree",{attrs:{data:e.categoryList,columns:e.columns,"show-index":"","index-text":"#",border:"","selection-type":!1,"expand-type":!1},scopedSlots:e._u([{key:"isOk",fn:function(e){return[!1===e.row.cat_deleted?a("i",{staticClass:"el-icon-success",staticStyle:{color:"lightgreen"}}):a("i",{staticClass:"el-icon-error",staticStyle:{color:"red"}})]}},{key:"cateSort",fn:function(t){return[0===t.row.cat_level?a("el-tag",[e._v("一级")]):1===t.row.cat_level?a("el-tag",{attrs:{type:"success"}},[e._v("二级")]):a("el-tag",{attrs:{type:"warning"}},[e._v("三级")])]}},{key:"handle",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(a){return e.cateEditDialog(t.row.cat_id)}}},[e._v("编辑")]),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(a){return e.cateDeleteDialog(t.row.cat_id)}}},[e._v("删除")])]}}])}),a("el-pagination",{attrs:{"current-page":e.queryInfo.pagenum,"page-sizes":[1,2,5,10],"page-size":e.queryInfo.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.cateHandleSizeChange,"current-change":e.cateHandleCurrentChange}})],1),a("el-dialog",{attrs:{title:"添加分类",visible:e.cateDialogVisible,width:"50%"},on:{"update:visible":function(t){e.cateDialogVisible=t},close:e.cateClose}},[a("el-form",{ref:"cateRef",attrs:{model:e.addCategory,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"分类名称:",prop:"cat_name"}},[a("el-input",{model:{value:e.addCategory.cat_name,callback:function(t){e.$set(e.addCategory,"cat_name",t)},expression:"addCategory.cat_name"}})],1),a("el-form-item",{attrs:{label:"父级分类:"}},[a("el-cascader",{attrs:{"expand-trigger":"hover",options:e.parentCateList,props:e.casProps,clearable:""},on:{change:e.calHandleChange},model:{value:e.casValue,callback:function(t){e.casValue=t},expression:"casValue"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.cateDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.addCateForm}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"修改分类",visible:e.editCateDialogVisible,width:"30%"},on:{"update:visible":function(t){e.editCateDialogVisible=t}}},[a("el-form",{ref:"editCateForm",attrs:{model:e.editCateForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"分类名称",prop:"cat_name"}},[a("el-input",{model:{value:e.editCateForm.cat_name,callback:function(t){e.$set(e.editCateForm,"cat_name",t)},expression:"editCateForm.cat_name"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.editCateDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.editCatedialog}},[e._v("确 定")])],1)],1)],1)},Ie=[];function ze(e,t,a){return h({method:"get",url:"/categories",params:{type:e,pagenum:t,pagesize:a}})}function Oe(e,t,a){return h({method:"post",url:"/categories",data:{cat_pid:e,cat_name:t,cat_level:a}})}function Le(e){return h({method:"get",url:"/categories/".concat(e),params:{id:e}})}function je(e,t){return h({method:"put",url:"/categories/".concat(e),data:{id:e,cat_name:t}})}function Se(e){return h({method:"delete",url:"categories/".concat(e),params:{id:e}})}var qe={name:"Categories",data:function(){return{categoryList:[],parentCateList:[],cateDialogVisible:!1,editCateDialogVisible:!1,casValue:[],editCateForm:{},casProps:{value:"cat_id",label:"cat_name",children:"children",checkStrictly:!0},addCategory:{cat_name:"",cat_pid:0,cat_level:0},queryInfo:{type:3,pagenum:1,pagesize:5},total:0,columns:[{label:"分类名称",prop:"cat_name"},{label:"是否有效",prop:"cat_deleted",type:"template",template:"isOk"},{label:"排序",prop:"cat_level",type:"template",template:"cateSort"},{label:"操作",type:"template",template:"handle"}],rules:{cat_name:[{required:!0,message:"请输入分类名称",trigger:"blur"},{min:1,max:10,message:"长度在 1 到 10 个字符",trigger:"blur"}]}}},methods:{getParentCateList:function(){var e=this;ze(2).then((function(t){console.log(t),e.parentCateList=t.data}))},getCategory:function(){var e=this;ze(this.queryInfo.type,this.queryInfo.pagenum,this.queryInfo.pagesize).then((function(t){e.categoryList=t.data.result,e.total=t.data.total}))},cateHandleSizeChange:function(e){this.queryInfo.pagesize=e,this.getCategory()},cateHandleCurrentChange:function(e){this.queryInfo.pagenum=e,this.getCategory()},cateClose:function(){this.$refs.cateRef.resetFields(),this.casValue=[],this.addCategory.cat_level=0,this.addCategory.cat_pid=0},addCate:function(){this.getParentCateList(),this.cateDialogVisible=!0},addCateForm:function(){var e=this;console.log(this.addCategory),this.$refs.cateRef.validate((function(t){t&&Oe(e.addCategory.cat_pid,e.addCategory.cat_name,e.addCategory.cat_level).then((function(t){if(console.log(t),201!==t.meta.status)return e.$message.error("添加分类失败");e.$message.success("添加分类成功"),e.getCategory()}))})),this.cateDialogVisible=!1},calHandleChange:function(){if(console.log(this.casValue),this.casValue.length>0)return this.addCategory.cat_pid=this.casValue[this.casValue.length-1],void(this.addCategory.cat_level=this.casValue.length);this.addCategory.cat_level=0,this.addCategory.cat_pid=0},cateEditDialog:function(e){var t=this;console.log(e,this.addCategory.cat_name),Le(e).then((function(e){console.log(e),200===e.meta.status&&(t.editCateForm=e.data)})),this.editCateDialogVisible=!0},cateDeleteDialog:function(e){var t=this;console.log(e),this.$confirm("此操作将永久删除该分类, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Se(e).then((function(e){if(console.log(e),200!==e.meta.status)return t.$message.error("删除失败");t.$message.success("删除成功"),t.getCategory()}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},editCatedialog:function(){var e=this;console.log(this.editCateForm.cat_id,this.editCateForm.cat_name),je(this.editCateForm.cat_id,this.editCateForm.cat_name).then((function(t){if(200!==t.meta.status)return e.$message.error("更新失败");e.$message.success("更新成功"),e.getCategory()})),this.editCateDialogVisible=!1}},created:function(){this.getCategory()}},Ne=qe,Ee=(a("6d89"),Object(n["a"])(Ne,Ve,Ie,!1,null,"c89982b8",null)),Pe=Ee.exports,Te=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"Orders"},[e._v(" Orders ")])},Ue=[],Be={name:"Orders"},He=Be,Me=Object(n["a"])(He,Te,Ue,!1,null,"efd56aa8",null),Ke=Me.exports,Ae=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"Reports"},[e._v(" Reports ")])},Ge=[],Je={name:"Reports"},We=Je,Qe=Object(n["a"])(We,Ae,Ge,!1,null,"45ab0dc4",null),Xe=Qe.exports;s["default"].use(d["a"]);var Ye=[{path:"/",redirect:"/login"},{path:"/login",component:C},{path:"/home",component:V,redirect:"/welcome",children:[{path:"/welcome",component:S},{path:"/users",component:se},{path:"/roles",component:ue},{path:"/Rights",component:he},{path:"/goods",component:we},{path:"/params",component:Fe},{path:"/categories",component:Pe},{path:"/orders",component:Ke},{path:"/reports",component:Xe}]}],Ze=new d["a"]({routes:Ye,mode:"history"});Ze.beforeEach((function(e,t,a){if("/login"===e.path)return a();var s=window.sessionStorage.getItem("token");if(!s)return a("/login");a()}));var et=Ze,tt=(a("150b"),a("5c96")),at=a.n(tt);s["default"].use(tt["Button"]),s["default"].use(tt["Form"]),s["default"].use(tt["FormItem"]),s["default"].use(tt["Input"]),s["default"].use(tt["Container"]),s["default"].use(tt["Header"]),s["default"].use(tt["Aside"]),s["default"].use(tt["Main"]),s["default"].use(tt["Menu"]),s["default"].use(tt["Submenu"]),s["default"].use(tt["MenuItem"]),s["default"].use(tt["Breadcrumb"]),s["default"].use(tt["BreadcrumbItem"]),s["default"].use(tt["Card"]),s["default"].use(tt["Row"]),s["default"].use(tt["Col"]),s["default"].use(tt["Table"]),s["default"].use(tt["TableColumn"]),s["default"].use(tt["Pagination"]),s["default"].use(tt["Select"]),s["default"].use(tt["Option"]),s["default"].prototype.$message=tt["Message"],s["default"].prototype.$confirm=tt["MessageBox"].confirm;var st=a("d67e"),ot=a.n(st);a("0fae");s["default"].component("table-tree",ot.a),s["default"].use(at.a),s["default"].config.productionTip=!1,new s["default"]({router:et,render:function(e){return e(u)}}).$mount("#app")},"57f9":function(e,t,a){},"6d89":function(e,t,a){"use strict";a("b57e")},a3fa:function(e,t,a){"use strict";a("0e05")},b57e:function(e,t,a){}});
//# sourceMappingURL=app.ce9044a1.js.map